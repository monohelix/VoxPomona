<!--
  Template for display search results
-->

{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
{% csrf_token %}

<!-- side navbar -->
<nav class="col-xs-3 menu">
  <div class="user_menu">
    <a href="/profile">
      <div class="list-group">
        <div class="list-group-item">
          <div class="row-action-primary">
            <i class="material-icons">person</i>
          </div>
          <div class="row-content">
            <h4 class="list-group-item-heading ">{{ user.UserInfo.name }}</h4>
          </div>
        </div>
      </div>
    </a>
    <br /> <br />
  </div>
  <ul>
    <a href="/search"><li class="withripple" data-target="#about">Go back</li></a>
    <li></li>
    <a href="/logout/"><li class="withripple">Logout</li></a>
  </ul>
</nav>

<!-- main content of pagae -->
<div class="pages col-xs-9">
  <!-- top level results -->
	<div class ="well">
    <h1>Search Results</h1>
    {% if finalized_results or p1 or p2 or p3 or p4 %}
      <h4>Click on each petition to view it</h4>
    {% else %}
      <br />
      <h3> No search results found. Please <a href="/search">try again</a> with different criteria.</h3>
    {% endif %}
  </div>
  <br />

  <!-- view only petitions -->
  {% if p1 %}
    <div class="well">
      <h1>Currently Open Petitions that You Can View Only </h1>
      <div class="list-group">
        {% for pet in p1 %}
          <a href="{{ pet.get_url }}">
            <div class="list-group-item">
              <div class="row-action-primary">
                <i class="material-icons">{{ pet.get_icon }}</i>
              </div>
              <div class="row-content">
                <b><h4 class="list-group-item-heading"> {{ pet.title }} </h4></b>
                <p class="list-group-item-heading "> Started by: {{ pet.get_creator_name }} (Last updated: {{ pet.last_updated }})</p>
              </div>
            </div>
          </a>
          {% if not forloop.last %}
            <div class="list-group-separator"></div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <br />
  {% endif %}

  <!-- petitions that you can view and sign -->
  {% if p2 %}
    <div class="well">
      <h1>Currently Open Petitions that You Can View and Sign </h1>
      <div class="list-group">
        {% for pet in p2 %}
          <a href="{{ pet.get_url }}">
            <div class="list-group-item">
              <div class="row-action-primary">
                <i class="material-icons">{{ pet.get_icon }}</i>
              </div>
              <div class="row-content">
                <b><h4 class="list-group-item-heading"> {{ pet.title }} </h4></b>
                <p class="list-group-item-heading "> Started by: {{ pet.get_creator_name }} (Last updated: {{ pet.last_updated }})</p>
              </div>
            </div>
          </a>
          {% if not forloop.last %}
            <div class="list-group-separator"></div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <br />
  {% endif %}

  <!-- petitions you can view, sign, comment -->
  {% if p3 %}
    <div class="well">
      <h1>Currently Open Petitions that You Can View, Sign, and Comment </h1>
      <div class="list-group">
        {% for pet in p3 %}
          <a href="{{ pet.get_url }}">
            <div class="list-group-item">
              <div class="row-action-primary">
                <i class="material-icons">{{ pet.get_icon }}</i>
              </div>
              <div class="row-content">
                <b><h4 class="list-group-item-heading"> {{ pet.title }} </h4></b>
                <p class="list-group-item-heading "> Started by: {{ pet.get_creator_name }} (Last updated: {{ pet.last_updated }})</p>
              </div>
            </div>
          </a>
          {% if not forloop.last %}
            <div class="list-group-separator"></div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <br />
  {% endif %}

  <!-- petitions you can view, sign, comment, and propose changes -->
  {% if p4 %}
    <div class="well">
      <h1>Currently Open Petitions that You Can View, Sign, Comment, and Propose Changes To </h1>
      <div class="list-group">
        {% for pet in p4 %}
          <a href="{{ pet.get_url }}">
            <div class="list-group-item">
              <div class="row-action-primary">
                <i class="material-icons">{{ pet.get_icon }}</i>
              </div>
              <div class="row-content">
                <b><h4 class="list-group-item-heading"> {{ pet.title }} </h4></b>
                <p class="list-group-item-heading "> Started by: {{ pet.get_creator_name }} (Last updated: {{ pet.last_updated }})</p>
              </div>
            </div>
          </a>
          {% if not forloop.last %}
            <div class="list-group-separator"></div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <br />
  {% endif %}

  <!-- finalized petitions -->
  {% if finalized_results %}
    <div class="well">
      <h1>Finalized Petitions</h1>
      <div class="list-group">
        {% for pet in finalized_results %}
          <a href="{{ pet.get_url }}">
            <div class="list-group-item">
              <div class="row-action-primary">
                <i class="material-icons">{{ pet.get_icon }}</i>
              </div>
              <div class="row-content">
                <b><h4 class="list-group-item-heading"> {{ pet.title }} </h4></b>
                <p class="list-group-item-heading "> Started by: {{ pet.get_creator_name }} (Last updated: {{ pet.last_updated }})</p>
              </div>
            </div>
          </a>
          {% if not forloop.last %}
            <div class="list-group-separator"></div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  {% endif %}
</div>

{% endblock %}